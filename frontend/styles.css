@import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=DM+Sans:wght@300;400;500&display=swap');

/* ── Root variables ── */
:root {
    --bg-primary: #0e0d0c;
    --bg-secondary: #161412;
    --bg-card: #1c1917;
    --bg-card-hover: #221f1b;
    --border: #2e2a25;
    --border-subtle: #1f1c18;
    --gold: #c9a84c;
    --gold-light: #e2c47a;
    --gold-dim: rgba(201, 168, 76, 0.15);
    --cream: #f0ead8;
    --cream-dim: rgba(240, 234, 216, 0.6);
    --cream-faint: rgba(240, 234, 216, 0.15);
    --wine: #8b2635;
    --wine-light: #b84455;
    --text-primary: #f0ead8;
    --text-secondary: rgba(240, 234, 216, 0.6);
    --text-muted: rgba(240, 234, 216, 0.3);
    --success: #5a8a5a;
    --warning: #a07840;
}

/* ── Global resets ── */
html, body, .stApp {
    background-color: var(--bg-primary) !important;
    font-family: 'DM Sans', sans-serif !important;
    color: var(--text-primary) !important;
}

/* ── Sidebar collapse button fix ── */
[data-testid="stSidebarCollapseButton"] button {
    background: var(--bg-card) !important;
    border: 1px solid var(--border) !important;
    border-radius: 2px !important;
    color: var(--gold) !important;
}

[data-testid="stSidebarCollapseButton"] button:hover {
    border-color: var(--gold) !important;
    background: var(--gold-dim) !important;
}

/* Hide the text label, keep the icon */
[data-testid="stSidebarCollapseButton"] button span:not(:has(svg)) {
    display: none !important;
}

[data-testid="stSidebarCollapseButton"] button svg {
    color: var(--gold) !important;
    fill: var(--gold) !important;
}

/* Also catch the collapsed state button */
[data-testid="collapsedControl"] {
    background: var(--bg-secondary) !important;
    border: 1px solid var(--border) !important;
    border-radius: 0 2px 2px 0 !important;
    color: var(--gold) !important;
}

[data-testid="collapsedControl"]:hover {
    border-color: var(--gold) !important;
}

/* ── Sidebar ── */
[data-testid="stSidebar"] {
    background-color: var(--bg-secondary) !important;
    border-right: 1px solid var(--border) !important;
}

[data-testid="stSidebar"] .stMarkdown,
[data-testid="stSidebar"] p,
[data-testid="stSidebar"] span {
    color: var(--text-secondary) !important;
    font-family: 'DM Sans', sans-serif !important;
    font-size: 0.8rem !important;
    letter-spacing: 0.12em !important;
    text-transform: uppercase !important;
}

[data-testid="stSidebar"] h1,
[data-testid="stSidebar"] h2,
[data-testid="stSidebar"] h3 {
    font-family: 'Cormorant Garamond', serif !important;
    color: var(--gold) !important;
    font-weight: 300 !important;
    letter-spacing: 0.05em !important;
    text-transform: none !important;
    font-size: 1.8rem !important;
}

[data-testid="stSidebar"] .stRadio label {
    font-family: 'DM Sans', sans-serif !important;
    font-size: 0.78rem !important;
    letter-spacing: 0.1em !important;
    text-transform: uppercase !important;
    color: var(--text-secondary) !important;
    padding: 0.5rem 0 !important;
    transition: color 0.2s !important;
}

[data-testid="stSidebar"] .stRadio label:hover {
    color: var(--gold-light) !important;
}

[data-testid="stSidebar"] .stRadio [data-baseweb="radio"] div:first-child {
    border-color: var(--border) !important;
    background: transparent !important;
}

/* ── Main content area ── */
.main .block-container {
    padding: 2.5rem 3rem 4rem !important;
    max-width: 1400px !important;
}

/* ── Page titles ── */
h1 {
    font-family: 'Cormorant Garamond', serif !important;
    font-weight: 300 !important;
    font-size: 3rem !important;
    color: var(--cream) !important;
    letter-spacing: 0.02em !important;
    margin-bottom: 0.25rem !important;
    line-height: 1.1 !important;
}

h2 {
    font-family: 'Cormorant Garamond', serif !important;
    font-weight: 400 !important;
    font-size: 1.6rem !important;
    color: var(--cream) !important;
}

h3 {
    font-family: 'DM Sans', sans-serif !important;
    font-weight: 500 !important;
    font-size: 0.75rem !important;
    letter-spacing: 0.15em !important;
    text-transform: uppercase !important;
    color: var(--gold) !important;
}

/* ── Metric cards ── */
[data-testid="metric-container"] {
    background: var(--bg-card) !important;
    border: 1px solid var(--border) !important;
    border-radius: 2px !important;
    padding: 1.25rem 1.5rem !important;
    transition: border-color 0.2s !important;
}

[data-testid="metric-container"]:hover {
    border-color: var(--gold) !important;
}

[data-testid="metric-container"] [data-testid="stMetricLabel"] {
    font-family: 'DM Sans', sans-serif !important;
    font-size: 0.7rem !important;
    letter-spacing: 0.15em !important;
    text-transform: uppercase !important;
    color: var(--text-muted) !important;
}

[data-testid="metric-container"] [data-testid="stMetricValue"] {
    font-family: 'Cormorant Garamond', serif !important;
    font-weight: 300 !important;
    font-size: 2.4rem !important;
    color: var(--cream) !important;
}

/* ── Buttons ── */
.stButton > button {
    background: transparent !important;
    border: 1px solid var(--gold) !important;
    color: var(--gold) !important;
    font-family: 'DM Sans', sans-serif !important;
    font-size: 0.72rem !important;
    letter-spacing: 0.15em !important;
    text-transform: uppercase !important;
    border-radius: 2px !important;
    padding: 0.6rem 1.8rem !important;
    transition: all 0.2s !important;
    font-weight: 400 !important;
}

.stButton > button:hover {
    background: var(--gold-dim) !important;
    border-color: var(--gold-light) !important;
    color: var(--gold-light) !important;
    transform: translateY(-1px) !important;
}

.stButton > button:active {
    transform: translateY(0) !important;
}

/* ── Inputs ── */
.stTextInput input,
.stNumberInput input,
.stTextArea textarea {
    background-color: var(--bg-card) !important;
    border: 1px solid var(--border) !important;
    border-radius: 2px !important;
    color: var(--text-primary) !important;
    font-family: 'DM Sans', sans-serif !important;
    font-size: 0.9rem !important;
    transition: border-color 0.2s !important;
}

.stTextInput input:focus,
.stNumberInput input:focus,
.stTextArea textarea:focus {
    border-color: var(--gold) !important;
    box-shadow: 0 0 0 1px var(--gold-dim) !important;
    outline: none !important;
}

.stTextInput label,
.stNumberInput label,
.stTextArea label,
.stSelectbox label,
.stCheckbox label {
    font-family: 'DM Sans', sans-serif !important;
    font-size: 0.72rem !important;
    letter-spacing: 0.12em !important;
    text-transform: uppercase !important;
    color: var(--text-muted) !important;
    margin-bottom: 0.25rem !important;
}

/* Selectbox */
[data-baseweb="select"] > div {
    background-color: var(--bg-card) !important;
    border: 1px solid var(--border) !important;
    border-radius: 2px !important;
    color: var(--text-primary) !important;
}

[data-baseweb="select"] > div:hover {
    border-color: var(--gold) !important;
}

[data-baseweb="popover"] {
    background-color: var(--bg-card) !important;
    border: 1px solid var(--border) !important;
}

[role="option"] {
    background-color: var(--bg-card) !important;
    color: var(--text-primary) !important;
    font-family: 'DM Sans', sans-serif !important;
}

[role="option"]:hover, [aria-selected="true"] {
    background-color: var(--bg-card-hover) !important;
    color: var(--gold-light) !important;
}

/* ── Toggles ── */
/* Track */
[data-baseweb="toggle"] > div {
    background-color: #2e2a25 !important;
    border: 1px solid #3e3a35 !important;
}

/* Track - checked */
[data-testid="stToggle"] input:checked ~ div,
[data-baseweb="toggle"] input:checked + div,
[data-baseweb="toggle"][aria-checked="true"] > div {
    background-color: #c9a84c !important;
    border-color: #c9a84c !important;
}

/* Thumb */
[data-baseweb="toggle"] > div > div {
    background-color: #f0ead8 !important;
    box-shadow: 0 1px 3px rgba(0,0,0,0.4) !important;
}

/* Label */
[data-testid="stToggle"] label,
[data-testid="stToggle"] p {
    font-family: 'DM Sans', sans-serif !important;
    font-size: 0.78rem !important;
    letter-spacing: 0.08em !important;
    color: rgba(240, 234, 216, 0.55) !important;
    text-transform: none !important;
}

/* ── Placeholder text ── */
.stTextInput input::placeholder,
.stTextArea textarea::placeholder,
.stNumberInput input::placeholder,
input::placeholder,
textarea::placeholder {
    color: rgba(240, 234, 216, 0.35) !important;
    opacity: 1 !important;
}

/* ── Divider ── */
hr {
    border-color: var(--border) !important;
    margin: 1.5rem 0 !important;
}

/* ── Alerts ── */
.stAlert {
    border-radius: 2px !important;
    border-left-width: 2px !important;
    font-family: 'DM Sans', sans-serif !important;
    font-size: 0.85rem !important;
}

/* ── Spinner ── */
.stSpinner > div {
    border-top-color: var(--gold) !important;
}

/* ── Caption ── */
.stCaption {
    font-family: 'DM Sans', sans-serif !important;
    color: var(--text-muted) !important;
    font-size: 0.75rem !important;
    letter-spacing: 0.05em !important;
}

/* ── Markdown body ── */
.stMarkdown p {
    font-family: 'DM Sans', sans-serif !important;
    font-size: 0.9rem !important;
    line-height: 1.7 !important;
    color: var(--text-secondary) !important;
}

/* ── Page subtitle ── */
.page-subtitle {
    font-family: 'DM Sans', sans-serif;
    font-size: 0.72rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--gold);
    margin-top: -0.5rem;
    margin-bottom: 2rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.page-subtitle::before {
    content: '';
    display: inline-block;
    width: 24px;
    height: 1px;
    background: var(--gold);
}

/* ── Section label ── */
.section-label {
    font-family: 'DM Sans', sans-serif;
    font-size: 0.65rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--text-muted);
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--border);
    margin-bottom: 1.25rem;
}

/* ── Custom wine table ── */
.wine-table-wrap {
    width: 100%;
    overflow-x: auto;
    margin-top: 0.5rem;
}

.wine-table {
    width: 100%;
    border-collapse: collapse;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.82rem;
}

.wine-table thead tr {
    border-bottom: 1px solid #2e2a25;
}

.wine-table thead th {
    font-size: 0.62rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: rgba(240, 234, 216, 0.3);
    font-weight: 400;
    padding: 0 1.25rem 0.75rem 0;
    text-align: left;
    white-space: nowrap;
    cursor: pointer;
    user-select: none;
    transition: color 0.15s;
}

.wine-table thead th:hover {
    color: rgba(240, 234, 216, 0.7);
}

.wine-table thead th.sort-asc,
.wine-table thead th.sort-desc {
    color: var(--gold) !important;
}

.wine-table thead th .sort-arrow {
    display: inline-block;
    margin-left: 0.35rem;
    opacity: 0;
    font-size: 0.55rem;
    transition: opacity 0.15s;
    vertical-align: middle;
}

.wine-table thead th:hover .sort-arrow {
    opacity: 0.4;
}

.wine-table thead th.sort-asc .sort-arrow,
.wine-table thead th.sort-desc .sort-arrow {
    opacity: 1;
}

.wine-table tbody tr {
    border-bottom: 1px solid #1f1c18;
    transition: background-color 0.15s;
}

.wine-table tbody tr:hover {
    background-color: #1c1917;
}

.wine-table tbody td {
    padding: 0.9rem 1.25rem 0.9rem 0;
    color: rgba(240, 234, 216, 0.85);
    vertical-align: middle;
    white-space: nowrap;
}

.wine-table .td-wine {
    white-space: normal;
    min-width: 200px;
}

.wine-name {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1rem;
    font-weight: 400;
    color: #f0ead8;
    display: block;
    line-height: 1.3;
}

.wine-meta {
    font-size: 0.7rem;
    color: rgba(240, 234, 216, 0.35);
    display: block;
    margin-top: 0.15rem;
    letter-spacing: 0.04em;
}

.td-vintage {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.05rem;
    font-weight: 300;
    color: rgba(240, 234, 216, 0.45);
    min-width: 56px;
}

.td-qty {
    text-align: center;
    color: rgba(240, 234, 216, 0.45);
    min-width: 40px;
}

.td-window {
    min-width: 110px;
    color: rgba(240, 234, 216, 0.4);
    font-size: 0.78rem;
    letter-spacing: 0.02em;
}

.td-rating {
    min-width: 130px;
}

.rating-bar-bg {
    background: #2e2a25;
    border-radius: 1px;
    height: 2px;
    width: 72px;
    display: inline-block;
    vertical-align: middle;
    margin-right: 0.6rem;
    position: relative;
    top: -1px;
}

.rating-bar-fill {
    background: linear-gradient(90deg, #c9a84c, #e2c47a);
    border-radius: 1px;
    height: 2px;
    display: block;
}

.rating-score {
    font-size: 0.8rem;
    color: rgba(240, 234, 216, 0.55);
    vertical-align: middle;
    font-variant-numeric: tabular-nums;
}

.badge-ready {
    display: inline-block;
    font-size: 0.55rem;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    color: #5a8a5a;
    border: 1px solid rgba(90, 138, 90, 0.5);
    border-radius: 2px;
    padding: 0.1rem 0.35rem;
    margin-left: 0.5rem;
    vertical-align: middle;
    position: relative;
    top: -1px;
}

/* ── Scrollbar ── */
::-webkit-scrollbar { width: 4px; height: 4px; }
::-webkit-scrollbar-track { background: var(--bg-secondary); }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }
::-webkit-scrollbar-thumb:hover { background: var(--gold); }

/* ── Chrome cleanup ── */
header[data-testid="stHeader"] { background: transparent !important; border-bottom: none !important; }
footer { display: none !important; }
#MainMenu { display: none !important; }

.sidebar-divider { width: 100%; height: 1px; background: var(--border); margin: 1rem 0; }